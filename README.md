# Новостной сайт 

Данное приложение представляет собой новостной блог, в котором пользователь имеет возможности:
1. Регистрация и авторизация 
2. Создание, удаление и обновление категорий для новостей
3. Создание, удалений и обновление новостей внутри одной категории
4. Создание, удаление и обновление комментариев под каждой новость

Для использования полного функционала пользователь должен зарегистрироваться и авторизоваться, иначе он сможет только просматривать.

## Версия 0.1.1

## Улучшения:
1. Внутренние изменения для ускорения работы с категориями новостей

## Установка приложения

### Клонирование проекта
```bash
 git clone https://github.com/RomanZemchenkov/News-portal.git
```

### Сборка проекта
```bash
 mvn clean package -DskipTests
```

### Создание Docker образа
```bash
 docker build -t news-portal:0.1.1 .
```

### Запуск Docker Compose для создания контейнера без данных
```bash
 cd docker
 docker-compose up --build
```

### Запуск Docker Compose для создания контейнера c инициализацией готовых пользователей, статей, новостей и комментариев (придётся немного подождать)
```bash
 cd docker
 SPRING_PROFILES_ACTIVE=init docker-compose up --build
```

### Вы можете настроить длительность удержания новостей в оперативной памяти при помощи переменной SPRING_DATA_REDIS_NEWS_LIVE_TIME
#### По умолчанию: 100 в секундах

```bash
 cd docker
 SPRING_DATA_REDIS_NEWS_LIVE_TIME=300 docker-compose up --build
```

## Использование приложения
После выполнения всех предыдущих шагов приложение будет доступно по адресу

### Пользователь:
1. ```http://localhost:8080/api/customers``` - созание, изменение и удаление пользователя
2. ```http://localhost:8080/api/customers?page=n%size=n``` - получение страницы с пользователями по page=n - номер страницы и size=n - размер страницы. Обязательные параметры
3. ```http://localhost:8080/api/customers/login``` - вход в аккаунт пользователь
4. ```http://localhost:8080/api/customers/logout``` - выход из аккаунта пользователя
5. ```http://localhost:8080/api/customers/{n}``` - поиск пользователя по {n} адресу 

### Категории:
1. ```http://localhost:8080/api/categories``` - создание и изменение 
2. ```http://localhost:8080/api/categories?page=n%size=n``` - получение страницы с категориями по page=n - номер страницы и size=n - размер страницы. Обязательные параметры
3. ```http://localhost:8080/api/categories/{n}``` - получение и удаление категории по id {n}

### Новости:
1. ```http://localhost:8080/api/news``` - создание и изменение новости
2. ```http://localhost:8080/api/news?page=n%size=n``` - получение страницы с новостями по page=n - номер страницы и size=n - размер страницы. Обязательные параметры
3. ```http://localhost:8080/api/news/filter``` - получение страницы с новостями по необязательным фильтрам:
   1. categoryId - фильтр по id категории 
   2. customerId - фильтра по id автора новости
   3. page - выбор страницы
   4. size - выбор размера страницы
4. ```http://localhost:8080/api/news/{n}``` - получение и удаление новости по id {n}

### Комментарии:
1. ```http://localhost:8080/api/news/{newsId}/comments``` - создание и изменение комментария
2. ```http://localhost:8080/api/news/{newsId}/comments/{n}``` - удаление комментария по id {n}


### Весь функионал:
Удобнее всего тестировать работу данного сервиса будет по адресу:
```http://localhost:8080/swagger-ui/index.html#```
